<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Updated title from Game Hub to Arctic -->
    <title>Arctic - Play Your Favorite Games</title>
    <!-- Added favicon link -->
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    
    <div class="container">
        <!-- Redesigned header to be more compact with iPhone 16 camera-style layout -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <img src="logo.png" alt="Arctic Logo" class="logo">
                    <h1 class="title">Arctic</h1>
                </div>
                <nav class="tab-nav">
                    <button class="tab-btn active" onclick="switchTab('games')">Games</button>
                    <button class="tab-btn" onclick="switchTab('settings')">Settings</button>
                    <!-- Added new About Blank Opener tab -->
                    <button class="tab-btn" onclick="switchTab('opener')">About Blank</button>
                </nav>
                <!-- Removed fullscreen button from header -->
            </div>
        </header>

        <!-- Games tab content -->
        <div id="games-tab" class="tab-content active">
            <div class="search-container">
                <input type="text" id="search" placeholder="Search games..." class="search-input">
                <div class="game-count">
                    <span id="game-count">0</span> games available
                </div>
            </div>

            <div class="games-container" id="games-container">
                <!-- Games will be populated by JavaScript -->
            </div>
        </div>

        <!-- Settings tab content -->
        <div id="settings-tab" class="tab-content">
            <div class="settings-container">
                <h2 class="settings-title">Settings</h2>
                
                <!-- Added stealth mode toggle section -->
                <div class="settings-section">
                    <h3>Stealth Mode</h3>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="stealth-mode" onchange="toggleStealthMode()">
                            <span class="checkmark"></span>
                            Enable about:blank stealth mode
                        </label>
                    </div>
                    <div class="settings-description">
                        When enabled, the site will automatically open in an about:blank window to hide the URL from browser history and address bar.
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Tab Cloaking</h3>
                    <!-- Added preset cloaking options from JSON data -->
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="cloak-presets">Quick Cloak Presets</label>
                            <select id="cloak-presets" class="settings-select" onchange="applyPresetCloak()">
                                <option value="">Select a preset...</option>
                                <option value="google">Google</option>
                                <option value="canvas">Canvas Dashboard</option>
                                <option value="desmos">Desmos Graphing Calculator</option>
                                <option value="drive">Google Drive</option>
                                <option value="classroom">Google Classroom</option>
                                <option value="newtab">New Tab</option>
                                <option value="docs">Google Docs</option>
                                <option value="edpuzzle">Edpuzzle</option>
                                <option value="khan">Khan Academy</option>
                                <option value="quizlet">Quizlet</option>
                                <option value="schoology">Schoology</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tab-title">Custom Tab Title</label>
                            <input type="text" id="tab-title" class="settings-input" placeholder="Enter custom tab title">
                        </div>
                        <div class="form-group">
                            <label for="tab-icon">Custom Tab Icon URL</label>
                            <input type="text" id="tab-icon" class="settings-input" placeholder="Enter favicon URL">
                        </div>
                        <div class="button-group">
                            <button class="settings-button" onclick="applyTabCloak()">Apply Custom Cloak</button>
                            <button class="settings-button secondary" onclick="resetTabCloak()">Reset</button>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Privacy & Security</h3>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="disable-history">
                            <span class="checkmark"></span>
                            Disable browsing history
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="clear-cookies">
                            <span class="checkmark"></span>
                            Clear cookies on exit
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="incognito-mode">
                            <span class="checkmark"></span>
                            Enable incognito mode
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Theme Selection</h3>
                    <div class="theme-buttons">
                        <!-- Updated theme button to show Arctic Blue as current -->
                        <button class="theme-btn" style="background: linear-gradient(135deg, #0ea5e9, #38bdf8); color: white;" onclick="setTheme('arctic')">Arctic Blue (Current)</button>
                        <button class="theme-btn" style="background: linear-gradient(135deg, #8b5cf6, #a78bfa); color: white;" onclick="setTheme('purple')">Purple</button>
                        <button class="theme-btn" style="background: linear-gradient(135deg, #10b981, #34d399); color: white;" onclick="setTheme('green')">Green</button>
                        <button class="theme-btn" style="background: linear-gradient(135deg, #f59e0b, #fbbf24); color: white;" onclick="setTheme('orange')">Orange</button>
                        <button class="theme-btn" style="background: linear-gradient(135deg, #ef4444, #f87171); color: white;" onclick="setTheme('red')">Red</button>
                        <button class="theme-btn" style="background: linear-gradient(135deg, #6b7280, #9ca3af); color: white;" onclick="setTheme('dark')">Dark</button>
                    </div>
                    <div class="settings-description">
                        Choose from predefined themes or create your own custom theme below.
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Panic Mode</h3>
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="panic-key">Panic Key</label>
                            <select id="panic-key" class="settings-select">
                                <option value="Escape">Escape</option>
                                <option value="F1">F1</option>
                                <option value="F2">F2</option>
                                <option value="F3">F3</option>
                                <option value="F4">F4</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="panic-url">Panic URL</label>
                            <input type="text" id="panic-url" class="settings-input" placeholder="https://classroom.google.com" value="https://classroom.google.com">
                        </div>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="panic-enabled">
                                <span class="checkmark"></span>
                                Enable panic mode
                            </label>
                        </div>
                        <div class="settings-description">
                            Panic mode instantly redirects to a safe URL when the panic key is pressed.
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Password Protection</h3>
                    <div class="settings-form">
                        <div class="form-group">
                            <label for="site-password">Site Password</label>
                            <input type="password" id="site-password" class="settings-input" placeholder="Enter password">
                        </div>
                        <div class="button-group">
                            <button class="settings-button" onclick="setPassword()">Set Password</button>
                            <button class="settings-button secondary" onclick="removePassword()">Remove Password</button>
                        </div>
                        <div class="settings-description">
                            Protect your site with a password. Users will need to enter the password to access the site.
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Advanced Settings</h3>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="auto-fullscreen">
                            <span class="checkmark"></span>
                            Auto-fullscreen games
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="disable-right-click">
                            <span class="checkmark"></span>
                            Disable right-click menu
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="disable-devtools">
                            <span class="checkmark"></span>
                            Disable developer tools
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Data Management</h3>
                    <div class="button-group">
                        <button class="settings-button" onclick="exportSettings()">Export Settings</button>
                        <button class="settings-button" onclick="importSettings()">Import Settings</button>
                        <button class="settings-button secondary" onclick="resetAllSettings()">Reset All Settings</button>
                    </div>
                    <div class="settings-description">
                        Export your settings to a file or import settings from a previously saved file.
                    </div>
                </div>
            </div>
        </div>

        <!-- Added new About Blank Opener tab content -->
        <div id="opener-tab" class="tab-content">
            <div class="opener-container">
                <h2 class="opener-title">About:Blank Opener</h2>
                <div class="opener-content">
                    <div class="opener-description">
                        <p>Launch Arctic in a new about:blank window to completely hide the URL from browser history and address bar.</p>
                        <p>This provides maximum stealth and privacy while browsing.</p>
                    </div>
                    
                    <div class="opener-controls">
                        <button class="opener-button primary" onclick="openInAboutBlank()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                <polyline points="15,3 21,3 21,9"></polyline>
                                <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                            Open in About:Blank
                        </button>
                        
                        <button class="opener-button secondary" onclick="openInNewTab()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14,2 14,8 20,8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10,9 9,9 8,9"></polyline>
                            </svg>
                            Open in New Tab
                        </button>
                    </div>
                    
                    <div class="opener-features">
                        <h3>Features:</h3>
                        <ul>
                            <li>✓ Complete URL masking</li>
                            <li>✓ No browser history traces</li>
                            <li>✓ Bypasses most web filters</li>
                            <li>✓ Maximum privacy protection</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Added watermark for chesco -->
    <div class="watermark">made by chesco</div>

    <!-- Game Modal -->
    <div id="game-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-game-title">Game Title</h3>
                <div class="modal-controls">
                    <button class="modal-btn" onclick="fullscreenGame()" title="Fullscreen Game">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                        </svg>
                    </button>
                    <button class="modal-btn close-btn" onclick="closeGameModal()" title="Close">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <iframe id="game-iframe" src="" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <script>
        function toggleStealthMode() {
            const stealthEnabled = document.getElementById('stealth-mode').checked;
            localStorage.setItem('stealth-mode', stealthEnabled);
            
            if (stealthEnabled) {
                activateStealthMode();
            }
        }

        function activateStealthMode() {
            // Check if we're already in about:blank to prevent infinite loop
            if (window.location.href === 'about:blank') return;
            
            // Open about:blank window and write content there
            const newWindow = window.open('about:blank', '_blank');
            
            if (newWindow) {
                // Get the entire HTML content
                const htmlContent = document.documentElement.outerHTML;
                
                newWindow.document.write(htmlContent);
                newWindow.document.close();
                
                // Close the original window after a short delay
                setTimeout(() => {
                    window.close();
                    // If window.close() doesn't work, redirect to a blank page
                    if (!window.closed) {
                        window.location.replace('about:blank');
                    }
                }, 100);
            } else {
                // If popup was blocked, redirect current window to about:blank
                const currentContent = document.documentElement.outerHTML;
                window.location.replace('about:blank');
                setTimeout(() => {
                    document.open();
                    document.write(currentContent);
                    document.close();
                }, 100);
            }
        }

        // Tab functionality
        function switchTab(tabId) {
            const tabContents = document.querySelectorAll('.tab-content');
            const tabButtons = document.querySelectorAll('.tab-btn');

            tabContents.forEach(content => {
                content.classList.remove('active');
            });

            tabButtons.forEach(button => {
                button.classList.remove('active');
            });

            document.getElementById(tabId + '-tab').classList.add('active');
            const button = Array.from(tabButtons).find(btn => btn.textContent.toLowerCase().includes(tabId === 'opener' ? 'about blank' : tabId));
            if (button) {
                button.classList.add('active');
            }
        }

        // Fullscreen functionality
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // Game Modal functionality
        function openGameModal(gameUrl, gameName) {
            document.getElementById('modal-game-title').textContent = gameName;
            document.getElementById('game-iframe').src = gameUrl;
            document.getElementById('game-modal').style.display = 'flex';
        }

        function closeGameModal() {
            document.getElementById('game-modal').style.display = 'none';
            document.getElementById('game-iframe').src = '';
        }

        function fullscreenGame() {
            const iframe = document.getElementById('game-iframe');
            if (iframe.requestFullscreen) {
                iframe.requestFullscreen();
            } else if (iframe.webkitRequestFullscreen) {
                iframe.webkitRequestFullscreen();
            } else if (iframe.msRequestFullscreen) {
                iframe.msRequestFullscreen();
            }
        }

        // Settings functionality
        const cloakPresets = {
            "google": ["Google", "https://google.com/favicon.ico"],
            "canvas": ["Dashboard", "https://du11hjcvx0uqb.cloudfront.net/dist/images/favicon-e10d657a73.ico"],
            "desmos": ["Desmos | Graphing Calculator", "https://www.desmos.com/assets/img/apps/graphing/favicon.ico"],
            "drive": ["My Drive - Google Drive", "https://ssl.gstatic.com/docs/doclist/images/drive_2022q3_32dp.png"],
            "classroom": ["Home", "https://ssl.gstatic.com/classroom/ic_product_classroom_144.png"],
            "newtab": ["New Tab", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABRklEQVR42mKgOqjq75ds7510YNL0uV9nAGqniqwKYiCIHIIjcAK22BGQLRdgBWvc3fnWk/FJhrkPO1xPgGvqPfLfJMHhT1yqurvS48bPaJhjD2efgidnVwa2yv59xecvEvi0UWCXq9t0ItfP2MMZ7nwIpkA8F1n8uLxZHM6yrBH7FIl2gFXDHYsErkn2hyKLHtcKrFntk58uVQJ+kSdQnmjhID4cwLLa8+K0BXsfNWCqBOsFdo2Yldv43DBrkxd30cjnNyYBhK0SQGkI9pG4Mu40D5b374DRCAyhHqXVfTmOwivivMkJxBz5wnHCtBfGgNFC+ChWKWRf3hsQIlyEoIv4IYEo5wkgtBLRekY9DE4Uin4Keae6hydGnljPmE8kRcCine6827AMsJ1IuW9ibnlQpXLBCR/WC875m2BP+VSu3c/0m+8V08OBngc0pxcAAAAASUVORK5CYII="],
            "docs": ["Google Docs", "https://ssl.gstatic.com/docs/documents/images/kix-favicon-2023q4.ico"],
            "edpuzzle": ["Edpuzzle", "https://edpuzzle.imgix.net/favicons/favicon-32.png"],
            "khan": ["Dashboard | Khan Academy", "https://cdn.kastatic.org/images/favicon.ico?logo"],
            "quizlet": ["Your Sets", "https://assets.quizlet.com/a/j/dist/app/i/logo/2021/q-twilight.e27821d9baad165.png"],
            "schoology": ["Schoology", "https://technology-mnps.ss13.sharpschool.com/UserFiles/Servers/Server_33575695/Image/Technology/Digital%20Tools/Schoology/Schoology.png"]
        };

        function applyPresetCloak() {
            const selectedPreset = document.getElementById('cloak-presets').value;
            if (selectedPreset && cloakPresets[selectedPreset]) {
                const [title, iconUrl] = cloakPresets[selectedPreset];
                
                // Apply the preset
                document.title = title;
                
                let favicon = document.querySelector('link[rel="icon"]');
                if (!favicon) {
                    favicon = document.createElement('link');
                    favicon.rel = 'icon';
                    document.head.appendChild(favicon);
                }
                favicon.href = iconUrl;
                
                // Save to localStorage
                localStorage.setItem('cloaked-title', title);
                localStorage.setItem('cloaked-icon', iconUrl);
                
                // Update the custom input fields to show what was applied
                document.getElementById('tab-title').value = title;
                document.getElementById('tab-icon').value = iconUrl;
                
                alert(`Applied ${title} cloak successfully!`);
            }
        }

        function applyTabCloak() {
            const title = document.getElementById('tab-title').value;
            const icon = document.getElementById('tab-icon').value;
            
            if (title) {
                document.title = title;
                localStorage.setItem('cloaked-title', title);
            }
            
            if (icon) {
                let favicon = document.querySelector('link[rel="icon"]');
                if (!favicon) {
                    favicon = document.createElement('link');
                    favicon.rel = 'icon';
                    document.head.appendChild(favicon);
                }
                favicon.href = icon;
                localStorage.setItem('cloaked-icon', icon);
            }
            
            alert('Tab cloak applied successfully!');
        }

        function resetTabCloak() {
            // Updated default title to Arctic
            document.title = 'Arctic - Play Your Favorite Games';
            document.getElementById('tab-title').value = '';
            document.getElementById('tab-icon').value = '';
            localStorage.removeItem('cloaked-title');
            localStorage.removeItem('cloaked-icon');
            alert('Tab cloak reset successfully!');
        }

        function setTheme(theme) {
            alert(`Theme changed to: ${theme}`);
        }

        function setPassword() {
            const password = document.getElementById('site-password').value;
            if (password) {
                localStorage.setItem('site-password', password);
                alert('Password set successfully!');
            }
        }

        function removePassword() {
            localStorage.removeItem('site-password');
            document.getElementById('site-password').value = '';
            alert('Password removed successfully!');
        }

        function exportSettings() {
            const settings = {
                tabTitle: localStorage.getItem('cloaked-title'),
                tabIcon: localStorage.getItem('cloaked-icon'),
                password: localStorage.getItem('site-password'),
            };
            
            const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'game-hub-settings.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function importSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const settings = JSON.parse(e.target.result);
                            if (settings.tabTitle) localStorage.setItem('cloaked-title', settings.tabTitle);
                            if (settings.tabIcon) localStorage.setItem('cloaked-icon', settings.tabIcon);
                            if (settings.password) localStorage.setItem('site-password', settings.password);
                            alert('Settings imported successfully!');
                        } catch (error) {
                            alert('Error importing settings: Invalid file format');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function resetAllSettings() {
            if (confirm('Are you sure you want to reset all settings? This cannot be undone.')) {
                localStorage.clear();
                location.reload();
            }
        }

        // Load saved settings on page load
        window.addEventListener('load', function() {
            const savedTitle = localStorage.getItem('cloaked-title');
            const savedIcon = localStorage.getItem('cloaked-icon');
            
            if (savedTitle) {
                document.title = savedTitle;
                document.getElementById('tab-title').value = savedTitle;
            }
            
            if (savedIcon) {
                let favicon = document.querySelector('link[rel="icon"]');
                if (!favicon) {
                    favicon = document.createElement('link');
                    favicon.rel = 'icon';
                    document.head.appendChild(favicon);
                }
                favicon.href = savedIcon;
                document.getElementById('tab-icon').value = savedIcon;
            }
        });

        function openInAboutBlank() {
            // Get the entire HTML content
            const htmlContent = document.documentElement.outerHTML;
            
            // Open about:blank window
            const newWindow = window.open('about:blank', '_blank');
            
            if (newWindow) {
                // Write content to the new window
                newWindow.document.write(htmlContent);
                newWindow.document.close();
                
                // Focus the new window
                newWindow.focus();
            } else {
                alert('Popup blocked! Please allow popups for this site and try again.');
            }
        }

        function openInNewTab() {
            // Simple new tab opener
            window.open(window.location.href, '_blank');
        }
    </script>
</body>
</html>
